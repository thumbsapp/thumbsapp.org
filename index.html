<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>THUMBS ARENA ‚Äî Elite Gaming Platform</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* --- ULTRA-MODERN RESET & VARIABLES --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Core colors - Cyberpunk theme */
            --bg-primary: #0a0c14;
            --bg-card: #141824;
            --bg-secondary: #1e2230;
            --text-primary: #ffffff;
            --text-secondary: #a0a8c0;
            --accent: #6366f1;
            --accent-dark: #4f46e5;
            --accent-glow: #818cf8;
            --accent-secondary: #ec4899;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: #2a2f42;
            --shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 15px 30px rgba(0, 0, 0, 0.5);
            --radius: 1.2rem;
            --radius-sm: 0.8rem;
            --header-height: 75px;
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            transition: var(--transition);
            padding-top: var(--header-height);
            min-height: 100vh;
        }

        /* --- TYPOGRAPHY & UTILITIES --- */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.2;
            letter-spacing: -0.02em;
        }

        .container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* --- HEADER --- */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: rgba(20, 24, 36, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            box-shadow: var(--shadow);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
            letter-spacing: -1px;
        }

        .search-bar {
            background: var(--bg-secondary);
            border-radius: 2rem;
            padding: 0.6rem 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            border: 1px solid var(--border);
            transition: var(--transition);
            width: 320px;
        }

        .search-bar:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .search-bar i {
            color: var(--text-secondary);
        }

        .search-bar input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            width: 100%;
            font-size: 0.95rem;
        }

        .search-bar input::placeholder {
            color: var(--text-secondary);
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-item {
            padding: 0.6rem 1.2rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
            font-weight: 500;
            position: relative;
        }

        .nav-item:hover, .nav-item.active {
            background: var(--bg-secondary);
            color: var(--accent);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 2px;
            background: var(--accent);
            border-radius: 2px;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1.2rem;
            position: relative;
        }

        .icon-btn {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
            font-size: 1.2rem;
            position: relative;
        }

        .icon-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
            transform: scale(1.05);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .avatar:hover {
            border-color: var(--accent-glow);
            transform: scale(1.05);
        }

        .avatar.small {
            width: 36px;
            height: 36px;
            font-size: 0.9rem;
        }

        .avatar.large {
            width: 90px;
            height: 90px;
            font-size: 2.2rem;
            border-width: 3px;
        }

        .dropdown {
            position: absolute;
            top: calc(100% + 0.8rem);
            right: 0;
            background: var(--bg-card);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-lg);
            min-width: 260px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
            z-index: 1001;
        }

        .dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            padding: 0.9rem 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-primary);
            border-bottom: 1px solid var(--border);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background: var(--bg-secondary);
            color: var(--accent);
        }

        .dropdown-item i {
            width: 20px;
            color: var(--accent);
        }

        .theme-colors {
            display: flex;
            gap: 0.6rem;
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .theme-dot {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .theme-dot:hover {
            transform: scale(1.15);
            border-color: var(--text-primary);
        }

        .theme-dot.blue { background: #6366f1; }
        .theme-dot.pink { background: #ec4899; }
        .theme-dot.green { background: #10b981; }
        .theme-dot.purple { background: #8b5cf6; }
        .theme-dot.orange { background: #f97316; }

        /* --- MAIN GRID LAYOUT --- */
        .main-grid {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 1.5rem;
            padding: 1.5rem;
            min-height: calc(100vh - var(--header-height));
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 240px 1fr;
            }
            .right-sidebar {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            .left-sidebar {
                display: none;
            }
        }

        /* --- SIDEBARS --- */
        .sidebar {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: calc(var(--header-height) + 1.5rem);
            backdrop-filter: blur(8px);
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-section:last-child {
            margin-bottom: 0;
        }

        .sidebar-title {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            margin-bottom: 1.2rem;
            font-weight: 600;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-primary);
            margin-bottom: 0.2rem;
        }

        .sidebar-item:hover {
            background: var(--bg-secondary);
            color: var(--accent);
        }

        .sidebar-item i {
            width: 22px;
            color: var(--accent);
        }

        .badge {
            background: var(--accent);
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.2rem 0.6rem;
            border-radius: 1rem;
            margin-left: auto;
        }

        .badge.danger {
            background: var(--danger);
        }

        .badge.success {
            background: var(--success);
        }

        /* --- CARDS & FEED --- */
        .feed {
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }

        .card {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            padding: 1.5rem;
            transition: var(--transition);
            backdrop-filter: blur(8px);
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent);
        }

        .create-post {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .create-post input {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 2rem;
            padding: 0.8rem 1.5rem;
            color: var(--text-primary);
            outline: none;
            transition: var(--transition);
        }

        .create-post input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .post-info h4 {
            font-weight: 600;
            margin-bottom: 0.2rem;
        }

        .post-info span {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .post-content {
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .game-tag {
            background: var(--bg-secondary);
            padding: 0.25rem 0.75rem;
            border-radius: 2rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            margin-top: 0.5rem;
        }

        .post-stats {
            display: flex;
            gap: 1.5rem;
            padding: 0.8rem 0;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            margin-bottom: 0.8rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .post-stats span {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .post-actions {
            display: flex;
            gap: 0.8rem;
        }

        .post-action {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.6rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            font-weight: 500;
        }

        .post-action:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* --- GAMING ARENA --- */
        .arena-card {
            background: linear-gradient(135deg, #1e1b4b, #312e81);
            color: white;
            border: none;
            position: relative;
            overflow: hidden;
        }

        .arena-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99,102,241,0.2) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .duel-area {
            display: flex;
            align-items: center;
            justify-content: space-around;
            margin: 2rem 0;
            position: relative;
            z-index: 1;
        }

        .player {
            text-align: center;
        }

        .vs {
            font-size: 2.5rem;
            font-weight: 800;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
            background: rgba(255,255,255,0.1);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
        }

        .score {
            font-size: 3rem;
            font-weight: 700;
            margin-top: 0.5rem;
            text-shadow: 0 0 15px rgba(99,102,241,0.5);
        }

        .game-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 1.5rem 0;
            position: relative;
            z-index: 1;
        }

        .btn {
            padding: 0.9rem 2rem;
            border-radius: 2rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            background: var(--accent);
            color: white;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px var(--accent);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .btn-outline:hover {
            background: var(--bg-secondary);
            border-color: var(--accent);
            box-shadow: none;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* --- WALLET & BALANCE --- */
        .wallet-card {
            background: linear-gradient(135deg, #059669, #10b981);
            color: white;
            border: none;
        }

        .balance {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 1rem 0;
        }

        /* --- TOURNAMENT BRACKET --- */
        .bracket {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .bracket-round {
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            padding: 1rem;
        }

        .bracket-round h4 {
            margin-bottom: 1rem;
            color: var(--accent);
            font-size: 0.9rem;
        }

        .bracket-match {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 0.8rem;
            margin-bottom: 0.8rem;
            font-size: 0.85rem;
            transition: var(--transition);
        }

        .bracket-match:hover {
            border-color: var(--accent);
            transform: scale(1.02);
        }

        .bracket-match.winner {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        /* --- LEADERBOARD --- */
        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.8rem;
            border-bottom: 1px solid var(--border);
        }

        .leaderboard-item:last-child {
            border-bottom: none;
        }

        .rank {
            font-weight: 700;
            color: var(--accent);
            width: 35px;
            font-size: 1.1rem;
        }

        .rank.gold {
            color: #fbbf24;
        }

        .rank.silver {
            color: #94a3b8;
        }

        .rank.bronze {
            color: #b45309;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-weight: 600;
        }

        .player-points {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* --- LIVE CHAT --- */
        .chat-messages {
            height: 320px;
            overflow-y: auto;
            padding: 0.8rem;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
            scroll-behavior: smooth;
        }

        .chat-message {
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            padding: 0.5rem;
            border-radius: var(--radius-sm);
            background: var(--bg-card);
            border: 1px solid var(--border);
        }

        .chat-message.system {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--accent);
            text-align: center;
            font-style: italic;
        }

        .chat-message strong {
            color: var(--accent);
        }

        .chat-input {
            display: flex;
            gap: 0.5rem;
        }

        .chat-input input {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 2rem;
            padding: 0.7rem 1.2rem;
            color: var(--text-primary);
            outline: none;
        }

        .chat-input input:focus {
            border-color: var(--accent);
        }

        .chat-input .btn {
            padding: 0.7rem 1.2rem;
        }

        /* --- ACHIEVEMENTS & BADGES --- */
        .badges-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
            margin-top: 1rem;
        }

        .badge-item {
            text-align: center;
            padding: 0.8rem;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .badge-item:hover {
            transform: scale(1.05);
            border-color: var(--accent);
        }

        .badge-item.unlocked {
            background: linear-gradient(135deg, rgba(99,102,241,0.2), rgba(236,72,153,0.2));
            border-color: var(--accent);
        }

        .badge-icon {
            font-size: 2rem;
            margin-bottom: 0.2rem;
        }

        .badge-name {
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* --- MODAL --- */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .close-btn:hover {
            color: var(--danger);
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-family: inherit;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        /* --- TOAST NOTIFICATIONS --- */
        .toast-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 3000;
        }

        .toast {
            background: var(--bg-card);
            border-left: 4px solid var(--accent);
            border-radius: var(--radius-sm);
            padding: 1rem 1.5rem;
            margin-bottom: 0.8rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 1rem;
            animation: slideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid var(--border);
        }

        .toast.success {
            border-left-color: var(--success);
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        .toast.info {
            border-left-color: var(--accent);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* --- FOOTER --- */
        .footer {
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            padding: 3rem 1.5rem 1.5rem;
            margin-top: 3rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            max-width: 1440px;
            margin: 0 auto;
        }

        .footer-section h4 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
        }

        .footer-section a:hover {
            color: var(--accent);
        }

        /* --- LOADING SPINNER --- */
        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- PROGRESS BAR --- */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .search-bar {
                display: none;
            }
            .nav-menu {
                display: none;
            }
            .footer-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .bracket {
                grid-template-columns: 1fr;
            }
        }

        /* --- ANIMATIONS --- */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .live-badge {
            background: var(--danger);
            color: white;
            padding: 0.25rem 0.6rem;
            border-radius: 1rem;
            font-size: 0.7rem;
            font-weight: 600;
            animation: pulse 1.5s infinite;
        }

        /* --- GAME SPECIFIC --- */
        .reaction-game-area {
            text-align: center;
            padding: 2rem;
        }

        .reaction-target {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            border-radius: 50%;
            margin: 2rem auto;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            animation: pulse 1s infinite;
            box-shadow: 0 0 30px var(--accent);
        }

        .reaction-target.waiting {
            background: var(--warning);
            cursor: not-allowed;
            animation: none;
        }

        .reaction-target.ready {
            background: var(--success);
        }

        .match-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .memory-card {
            aspect-ratio: 1;
            background: var(--accent);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
        }

        .memory-card.flipped {
            background: var(--success);
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            background: var(--success);
            cursor: default;
            opacity: 0.5;
        }

        .strategy-board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 2px;
            background: var(--border);
            padding: 2px;
            border-radius: 4px;
        }

        .strategy-cell {
            aspect-ratio: 1;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            cursor: pointer;
        }

        .strategy-cell.player1 {
            background: var(--accent);
        }

        .strategy-cell.player2 {
            background: var(--danger);
        }

        /* --- PAGE VISIBILITY --- */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* --- ADS & SPONSORS --- */
        .ad-container {
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            color: white;
            border: none;
            cursor: pointer;
        }

        .ad-container:hover {
            transform: scale(1.02);
        }

        /* --- CUSTOM SCROLLBAR --- */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-glow);
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="logo-area">
            <div class="logo" onclick="app.navigate('home')">‚ö°THUMBS</div>
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" id="globalSearch" placeholder="Search games, players, tournaments..." onkeyup="app.search(this.value)">
            </div>
        </div>
        <div class="nav-menu">
            <div class="nav-item active" onclick="app.navigate('home')">Home</div>
            <div class="nav-item" onclick="app.navigate('arena')">Arena</div>
            <div class="nav-item" onclick="app.navigate('tournaments')">Tournaments</div>
            <div class="nav-item" onclick="app.navigate('leaderboards')">Leaderboards</div>
            <div class="nav-item" onclick="app.navigate('wiki')">Wiki AI</div>
        </div>
        <div class="user-menu">
            <div class="icon-btn" onclick="app.showNotifications()">
                <i class="fas fa-bell"></i>
                <span class="notification-badge" id="notificationBadge">3</span>
            </div>
            <div class="icon-btn" onclick="app.showMessages()">
                <i class="fas fa-envelope"></i>
                <span class="notification-badge" id="messageBadge">2</span>
            </div>
            <div class="avatar" onclick="app.toggleUserMenu()" id="userAvatar">
                <span id="avatarInitial">P</span>
            </div>
            <!-- User Dropdown -->
            <div class="dropdown" id="userDropdown">
                <div class="dropdown-item" onclick="app.showProfile()">
                    <i class="fas fa-user"></i> Profile
                </div>
                <div class="dropdown-item" onclick="app.showWallet()">
                    <i class="fas fa-wallet"></i> Wallet
                </div>
                <div class="dropdown-item" onclick="app.showSettings()">
                    <i class="fas fa-cog"></i> Settings
                </div>
                <div class="dropdown-item" onclick="app.showAchievements()">
                    <i class="fas fa-trophy"></i> Achievements
                </div>
                <div class="theme-colors">
                    <div class="theme-dot blue" onclick="app.setTheme('blue')"></div>
                    <div class="theme-dot pink" onclick="app.setTheme('pink')"></div>
                    <div class="theme-dot green" onclick="app.setTheme('green')"></div>
                    <div class="theme-dot purple" onclick="app.setTheme('purple')"></div>
                    <div class="theme-dot orange" onclick="app.setTheme('orange')"></div>
                </div>
                <div class="dropdown-item" onclick="app.toggleDarkMode()">
                    <i class="fas fa-moon"></i> Dark/Light
                </div>
                <div class="dropdown-item" onclick="app.showLanguageSelector()">
                    <i class="fas fa-language"></i> <span id="currentLanguage">English</span>
                </div>
                <div class="dropdown-item" onclick="app.logout()" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </div>
                <div class="dropdown-item" onclick="app.showLogin()" id="loginBtn" style="display: none;">
                    <i class="fas fa-sign-in-alt"></i> Login
                </div>
            </div>
        </div>
    </header>

    <!-- MAIN GRID -->
    <div class="main-grid">
        <!-- LEFT SIDEBAR -->
        <aside class="left-sidebar sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Social</div>
                <div class="sidebar-item" onclick="app.showFriends()">
                    <i class="fas fa-user-friends"></i> Friends
                    <span class="badge" id="friendsBadge">0</span>
                </div>
                <div class="sidebar-item" onclick="app.showMessages()">
                    <i class="fas fa-comment"></i> Messages
                    <span class="badge" id="messagesBadge">0</span>
                </div>
                <div class="sidebar-item" onclick="app.showGroups()">
                    <i class="fas fa-users"></i> Groups
                </div>
                <div class="sidebar-item" onclick="app.showEvents()">
                    <i class="fas fa-calendar"></i> Events
                </div>
            </div>
            <div class="sidebar-section">
                <div class="sidebar-title">Gaming</div>
                <div class="sidebar-item" onclick="app.navigate('arena')">
                    <i class="fas fa-video"></i> Live Arenas
                    <span class="badge danger" id="liveCount">0</span>
                </div>
                <div class="sidebar-item" onclick="app.navigate('tournaments')">
                    <i class="fas fa-trophy"></i> Tournaments
                </div>
                <div class="sidebar-item" onclick="app.showChallenges()">
                    <i class="fas fa-bolt"></i> Challenges
                </div>
                <div class="sidebar-item" onclick="app.navigate('leaderboards')">
                    <i class="fas fa-chart-line"></i> Leaderboards
                </div>
                <div class="sidebar-item" onclick="app.navigate('wiki')">
                    <i class="fas fa-robot"></i> Wiki AI
                </div>
            </div>
            <div class="sidebar-section">
                <div class="sidebar-title">Business</div>
                <div class="sidebar-item" onclick="app.showBusiness()">
                    <i class="fas fa-store"></i> Creator Studio
                </div>
                <div class="sidebar-item" onclick="app.showAds()">
                    <i class="fas fa-ad"></i> Ad Manager
                </div>
                <div class="sidebar-item" onclick="app.showAnalytics()">
                    <i class="fas fa-chart-pie"></i> Analytics
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="feed" id="mainContent">
            <!-- HOME PAGE -->
            <div id="home-page" class="page active">
                <!-- Create Post -->
                <div class="card create-post">
                    <div class="avatar small" id="postAvatar">P</div>
                    <input type="text" placeholder="Create a challenge, share your victory..." onclick="app.openCreateModal()" id="postInput">
                </div>
                
                <!-- Feed Posts -->
                <div id="feedContainer">
                    <div class="spinner"></div>
                </div>
                <button class="btn btn-outline" style="width: 100%;" onclick="app.loadMore()" id="loadMoreBtn">Load More</button>
            </div>

            <!-- ARENA PAGE -->
            <div id="arena-page" class="page">
                <div class="card arena-card">
                    <h2 style="margin-bottom: 1rem;">‚ö° REACTION DUEL ARENA</h2>
                    <div class="duel-area">
                        <div class="player">
                            <div class="avatar large" id="player1Avatar">P</div>
                            <h3 id="player1Name">ProGamer</h3>
                            <div class="score" id="scoreA">0</div>
                        </div>
                        <div class="vs">VS</div>
                        <div class="player">
                            <div class="avatar large" id="player2Avatar">G</div>
                            <h3 id="player2Name">GameMaster</h3>
                            <div class="score" id="scoreB">0</div>
                        </div>
                    </div>

                    <div style="background:rgba(255,255,255,0.1); border-radius:var(--radius-sm); padding: 1rem; margin: 1rem 0; display: flex; justify-content: space-between;">
                        <span><i class="fas fa-shield-alt"></i> Anti-Cheat Active</span>
                        <span><i class="fas fa-lock"></i> Escrow: <span id="entryAmount">10</span> THB</span>
                        <span><i class="fas fa-percent"></i> 10% Fee</span>
                    </div>

                    <div class="game-controls">
                        <button class="btn" onclick="app.startGame()" id="startGameBtn"><i class="fas fa-play"></i> Start Game</button>
                        <button class="btn" onclick="app.playRound()" id="playRoundBtn" disabled><i class="fas fa-bolt"></i> React!</button>
                        <button class="btn btn-outline" onclick="app.watchGame()"><i class="fas fa-eye"></i> Watch</button>
                    </div>

                    <div class="reaction-game-area" id="reactionGameArea" style="display: none;">
                        <div class="reaction-target" id="reactionTarget" onclick="app.handleReaction()">
                            <span id="targetText">READY</span>
                        </div>
                        <p>Click when the target turns <span style="color: var(--success);">GREEN</span></p>
                    </div>

                    <div style="display: flex; justify-content: space-between; color: rgba(255,255,255,0.8);">
                        <span><i class="fas fa-users"></i> <span id="viewerCount">234</span> watching</span>
                        <span><i class="fas fa-gift"></i> Prize: <span id="prizeAmount">20</span> THB</span>
                    </div>
                </div>

                <div class="card">
                    <h3>üèÜ Live Tournaments</h3>
                    <div class="bracket" id="tournamentBracket">
                        <!-- Dynamically populated -->
                    </div>
                </div>

                <div class="card">
                    <h3>üéÆ Memory Match</h3>
                    <div class="match-grid" id="memoryGame">
                        <!-- Memory cards will be generated here -->
                    </div>
                    <button class="btn" style="width: 100%; margin-top: 1rem;" onclick="app.startMemoryGame()">Start Memory Game</button>
                </div>

                <div class="card">
                    <h3>‚öîÔ∏è Strategy Battle</h3>
                    <div class="strategy-board" id="strategyBoard">
                        <!-- Strategy grid will be generated here -->
                    </div>
                </div>

                <div class="card">
                    <h3>üîí Legal & Compliance</h3>
                    <p>Age verification required ‚Ä¢ Geo-location active ‚Ä¢ Responsible gaming tools</p>
                    <div class="progress-bar" style="margin-top: 1rem;">
                        <div class="progress-fill" id="complianceProgress" style="width: 75%;"></div>
                    </div>
                </div>
            </div>

            <!-- TOURNAMENTS PAGE -->
            <div id="tournaments-page" class="page">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2>Active Tournaments</h2>
                        <button class="btn" onclick="app.createTournament()"><i class="fas fa-plus"></i> Create</button>
                    </div>
                    <div id="tournamentsList"></div>
                </div>
                
                <div class="card">
                    <h3>Upcoming Tournaments</h3>
                    <div id="upcomingTournaments"></div>
                </div>
            </div>

            <!-- LEADERBOARDS PAGE -->
            <div id="leaderboards-page" class="page">
                <div class="card">
                    <h2>Global Rankings</h2>
                    <div class="leaderboard-tabs" style="display: flex; gap: 1rem; margin: 1rem 0;">
                        <button class="btn btn-outline" onclick="app.loadLeaderboard('global')">Global</button>
                        <button class="btn btn-outline" onclick="app.loadLeaderboard('reaction')">Reaction Duel</button>
                        <button class="btn btn-outline" onclick="app.loadLeaderboard('chess')">Speed Chess</button>
                        <button class="btn btn-outline" onclick="app.loadLeaderboard('memory')">Memory Match</button>
                    </div>
                    <div id="leaderboardsList"></div>
                </div>
            </div>

            <!-- WIKI AI PAGE -->
            <div id="wiki-page" class="page">
                <div class="card">
                    <h2><i class="fas fa-robot"></i> Wiki AI Assistant</h2>
                    <div style="margin: 1rem 0;">
                        <div class="chat-messages" id="wikiMessages" style="height: 300px;">
                            <div class="chat-message system">
                                <strong>AI:</strong> Hello! I can answer questions about games, strategies, and more. Ask me anything!
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="wikiInput" placeholder="Ask about game strategies, tips, or facts..." onkeypress="app.handleWikiKeypress(event)">
                            <button class="btn" onclick="app.askWiki()"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- RIGHT SIDEBAR -->
        <aside class="right-sidebar sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Live Now</div>
                <div id="liveStreams"></div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Wallet</div>
                <div class="wallet-card card">
                    <div>Your Balance</div>
                    <div class="balance" id="walletBalance">100 THB</div>
                    <button class="btn" style="width: 100%;" onclick="app.showDeposit()"><i class="fas fa-credit-card"></i> Deposit</button>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Leaderboard</div>
                <div id="sidebarLeaderboard"></div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Live Chat</div>
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input">
                    <input type="text" placeholder="Type..." id="chatInput" onkeypress="app.handleChatKeypress(event)">
                    <button class="btn" style="padding: 0.7rem;" onclick="app.sendChat()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Achievements</div>
                <div class="badges-grid" id="achievementsList"></div>
            </div>

            <div class="sidebar-section">
                <div class="ad-container card" onclick="app.openAd()">
                    <h4>üéÆ Sponsored</h4>
                    <p>Pro Gaming Bundle - 50% OFF</p>
                    <p style="font-size: 0.8rem; margin-top: 0.5rem;">Click to claim</p>
                </div>
            </div>
        </aside>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-section">
                <h4>Support</h4>
                <ul>
                    <li><a onclick="app.showDonation()">Donation</a></li>
                    <li><a onclick="app.showSponsor()">Sponsor</a></li>
                    <li><a onclick="app.showHelp()">Help Center</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Company</h4>
                <ul>
                    <li><a onclick="app.showTerms()">Terms</a></li>
                    <li><a onclick="app.showPrivacy()">Privacy</a></li>
                    <li><a onclick="app.showAbout()">About</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Platform</h4>
                <ul>
                    <li><a onclick="app.navigate('home')">Home</a></li>
                    <li><a onclick="app.navigate('arena')">Arena</a></li>
                    <li><a onclick="app.navigate('tournaments')">Tournaments</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Legal</h4>
                <ul>
                    <li><a onclick="app.showAgeVerification()">Age Verification</a></li>
                    <li><a onclick="app.showCompliance()">Geo-Compliance</a></li>
                    <li><a onclick="app.showResponsible()">Responsible Gaming</a></li>
                </ul>
            </div>
        </div>
        <div style="text-align: center; margin-top: 2rem; color: var(--text-secondary);">
            ¬© 2026 THUMBS ARENA. All rights reserved. v3.0.0
        </div>
    </footer>

    <!-- MODALS -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="authTitle">Login</h2>
                <button class="close-btn" onclick="app.closeModal('authModal')">&times;</button>
            </div>
            <div id="loginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div style="text-align: right; margin-bottom: 1rem;">
                    <a onclick="app.showForgotPassword()">Forgot password?</a>
                </div>
                <button class="btn" style="width: 100%;" onclick="app.login()">Sign In</button>
                <p style="text-align: center; margin-top: 1rem;">
                    Don't have an account? <a onclick="app.showRegister()">Register</a>
                </p>
            </div>
            <div id="registerForm" style="display: none;">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="regUsername" placeholder="Choose username">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="regEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="regPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" id="regConfirmPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div class="form-group">
                    <label>Country</label>
                    <select id="regCountry">
                        <option value="US">United States</option>
                        <option value="SG">Singapore</option>
                        <option value="GB">United Kingdom</option>
                        <option value="FR">France</option>
                        <option value="DE">Germany</option>
                        <option value="JP">Japan</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Date of Birth</label>
                    <input type="date" id="regDob">
                </div>
                <button class="btn" style="width: 100%;" onclick="app.register()">Create Account</button>
                <p style="text-align: center; margin-top: 1rem;">
                    Already have an account? <a onclick="app.showLogin()">Sign in</a>
                </p>
            </div>
        </div>
    </div>

    <div class="modal" id="createModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Challenge</h2>
                <button class="close-btn" onclick="app.closeModal('createModal')">&times;</button>
            </div>
            <div class="form-group">
                <label>Title</label>
                <input type="text" id="challengeTitle" placeholder="Enter challenge title">
            </div>
            <div class="form-group">
                <label>Game</label>
                <select id="challengeGame">
                    <option value="Reaction Duel">Reaction Duel</option>
                    <option value="Speed Chess">Speed Chess</option>
                    <option value="Memory Match">Memory Match</option>
                    <option value="Strategy Battle">Strategy Battle</option>
                </select>
            </div>
            <div class="form-group">
                <label>Entry Fee (THB)</label>
                <input type="number" id="challengeEntryFee" value="10" min="10" step="10">
            </div>
            <div class="form-group">
                <label>Difficulty</label>
                <select id="challengeDifficulty">
                    <option value="beginner">Beginner</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="advanced">Advanced</option>
                </select>
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="challengeDescription" rows="3" placeholder="Describe your challenge..."></textarea>
            </div>
            <button class="btn" style="width: 100%;" onclick="app.createPost()">Create Challenge</button>
        </div>
    </div>

    <div class="modal" id="donationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Support Player</h2>
                <button class="close-btn" onclick="app.closeModal('donationModal')">&times;</button>
            </div>
            <div class="form-group">
                <label>Amount (THB)</label>
                <input type="number" id="donateAmount" value="10" min="10">
            </div>
            <div class="form-group">
                <label>Message (optional)</label>
                <textarea id="donateMessage" rows="3" placeholder="Good luck!"></textarea>
            </div>
            <button class="btn" style="width: 100%;" onclick="app.donate()">Send Donation</button>
        </div>
    </div>

    <div class="modal" id="depositModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Deposit Funds</h2>
                <button class="close-btn" onclick="app.closeModal('depositModal')">&times;</button>
            </div>
            <div class="form-group">
                <label>Amount (THB)</label>
                <input type="number" id="depositAmount" value="100" min="100" step="100">
            </div>
            <div class="form-group">
                <label>Payment Method</label>
                <select id="paymentMethod">
                    <option value="credit">Credit Card</option>
                    <option value="debit">Debit Card</option>
                    <option value="paypal">PayPal</option>
                    <option value="crypto">Cryptocurrency</option>
                </select>
            </div>
            <button class="btn" style="width: 100%;" onclick="app.processDeposit()">Process Deposit</button>
        </div>
    </div>

    <!-- TOAST CONTAINER -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // ==================== COMPLETE BACKEND SYSTEM ====================

        class Database {
            constructor() {
                this.users = new Map();
                this.posts = new Map();
                this.messages = new Map();
                this.tournaments = new Map();
                this.games = new Map();
                this.transactions = new Map();
                this.achievements = new Map();
                this.challenges = new Map();
                this.leaderboards = new Map();
                this.knowledgeBase = new Map();
                this.initSampleData();
            }

            initSampleData() {
                // Sample users with enhanced data
                this.users.set('1', {
                    id: '1',
                    username: 'ProGamer',
                    email: 'pro@example.com',
                    password: 'hashed_pass',
                    country: 'US',
                    level: 25,
                    xp: 12450,
                    balance: 2450,
                    wins: 156,
                    losses: 43,
                    achievements: ['first_win', 'pro_player', 'streak_10', 'tournament_winner'],
                    friends: ['2', '3'],
                    createdAt: new Date().toISOString()
                });

                this.users.set('2', {
                    id: '2',
                    username: 'GameMaster',
                    email: 'master@example.com',
                    password: 'hashed_pass',
                    country: 'SG',
                    level: 22,
                    xp: 11230,
                    balance: 1800,
                    wins: 98,
                    losses: 34,
                    achievements: ['first_win', 'pro_player'],
                    friends: ['1'],
                    createdAt: new Date().toISOString()
                });

                this.users.set('3', {
                    id: '3',
                    username: 'NoobSlayer',
                    email: 'slayer@example.com',
                    password: 'hashed_pass',
                    country: 'GB',
                    level: 18,
                    xp: 8900,
                    balance: 1200,
                    wins: 67,
                    losses: 29,
                    achievements: ['first_win'],
                    friends: ['1'],
                    createdAt: new Date().toISOString()
                });

                // Sample posts
                this.posts.set('1', {
                    id: '1',
                    userId: '1',
                    author: 'ProGamer',
                    content: 'Looking for reaction duel partner! Entry 10 THB',
                    game: 'Reaction Duel',
                    entryFee: 10,
                    difficulty: 'intermediate',
                    likes: 23,
                    comments: 5,
                    shares: 2,
                    timestamp: Date.now() - 120000
                });

                this.posts.set('2', {
                    id: '2',
                    userId: '2',
                    author: 'GameMaster',
                    content: 'Speed chess tournament starting soon! Join now',
                    game: 'Speed Chess',
                    entryFee: 20,
                    difficulty: 'advanced',
                    likes: 45,
                    comments: 8,
                    shares: 12,
                    timestamp: Date.now() - 900000
                });

                this.posts.set('3', {
                    id: '3',
                    userId: '3',
                    author: 'NoobSlayer',
                    content: 'Memory match challenge - First to 5 wins!',
                    game: 'Memory Match',
                    entryFee: 5,
                    difficulty: 'beginner',
                    likes: 12,
                    comments: 3,
                    shares: 1,
                    timestamp: Date.now() - 3600000
                });

                // Sample tournaments
                this.tournaments.set('1', {
                    id: '1',
                    name: 'Speed Chess Masters',
                    entryFee: 50,
                    prize: 500,
                    participants: 8,
                    maxParticipants: 16,
                    status: 'active',
                    game: 'Speed Chess',
                    startTime: Date.now() + 3600000,
                    bracket: this.generateBracket(8)
                });

                this.tournaments.set('2', {
                    id: '2',
                    name: 'Reaction Duel Pro',
                    entryFee: 25,
                    prize: 250,
                    participants: 12,
                    maxParticipants: 16,
                    status: 'active',
                    game: 'Reaction Duel',
                    startTime: Date.now() + 7200000,
                    bracket: this.generateBracket(16)
                });

                this.tournaments.set('3', {
                    id: '3',
                    name: 'Memory Match Championship',
                    entryFee: 10,
                    prize: 100,
                    participants: 4,
                    maxParticipants: 8,
                    status: 'upcoming',
                    game: 'Memory Match',
                    startTime: Date.now() + 86400000,
                    bracket: this.generateBracket(8)
                });

                // Sample achievements
                this.achievements.set('first_win', {
                    id: 'first_win',
                    name: 'First Victory',
                    icon: 'üèÜ',
                    description: 'Win your first game'
                });

                this.achievements.set('pro_player', {
                    id: 'pro_player',
                    name: 'Pro Player',
                    icon: '‚≠ê',
                    description: 'Reach level 10'
                });

                this.achievements.set('streak_10', {
                    id: 'streak_10',
                    name: '10 Streak',
                    icon: 'üî•',
                    description: 'Win 10 games in a row'
                });

                this.achievements.set('tournament_winner', {
                    id: 'tournament_winner',
                    name: 'Tournament Champion',
                    icon: 'üëë',
                    description: 'Win a tournament'
                });

                // Sample knowledge base for Wiki AI
                this.knowledgeBase.set('reaction_duel_tips', {
                    topic: 'Reaction Duel Tips',
                    content: 'Focus on the center, use peripheral vision, practice daily. Pro players average 180-220ms reaction time.',
                    category: 'gaming'
                });

                this.knowledgeBase.set('speed_chess_strategy', {
                    topic: 'Speed Chess Strategy',
                    content: 'Opening preparation is key. Use premoves, manage time wisely, practice common endgames.',
                    category: 'gaming'
                });
            }

            generateBracket(size) {
                const rounds = Math.log2(size);
                const bracket = [];
                for (let i = 0; i < rounds; i++) {
                    const matches = [];
                    for (let j = 0; j < size / Math.pow(2, i + 1); j++) {
                        matches.push({
                            id: `match_${i}_${j}`,
                            player1: null,
                            player2: null,
                            winner: null,
                            score1: 0,
                            score2: 0
                        });
                    }
                    bracket.push(matches);
                }
                return bracket;
            }

            // User methods
            createUser(userData) {
                const id = Date.now().toString();
                const user = {
                    id,
                    ...userData,
                    createdAt: new Date().toISOString(),
                    balance: 100,
                    level: 1,
                    xp: 0,
                    wins: 0,
                    losses: 0,
                    achievements: [],
                    friends: []
                };
                this.users.set(id, user);
                return user;
            }

            getUserByEmail(email) {
                return Array.from(this.users.values()).find(u => u.email === email);
            }

            getUserByUsername(username) {
                return Array.from(this.users.values()).find(u => u.username === username);
            }

            getUser(id) {
                return this.users.get(id);
            }

            updateUser(id, data) {
                const user = this.users.get(id);
                if (user) {
                    Object.assign(user, data);
                    this.users.set(id, user);
                }
                return user;
            }

            // Post methods
            createPost(postData) {
                const id = Date.now().toString();
                const post = {
                    id,
                    ...postData,
                    likes: 0,
                    comments: 0,
                    shares: 0,
                    timestamp: Date.now()
                };
                this.posts.set(id, post);
                return post;
            }

            getPosts(limit = 10, offset = 0) {
                return Array.from(this.posts.values())
                    .sort((a, b) => b.timestamp - a.timestamp)
                    .slice(offset, offset + limit);
            }

            likePost(postId, userId) {
                const post = this.posts.get(postId);
                if (post) {
                    post.likes++;
                    this.posts.set(postId, post);
                }
                return post;
            }

            // Tournament methods
            getActiveTournaments() {
                return Array.from(this.tournaments.values())
                    .filter(t => t.status === 'active');
            }

            getUpcomingTournaments() {
                return Array.from(this.tournaments.values())
                    .filter(t => t.status === 'upcoming');
            }

            joinTournament(tournamentId, userId) {
                const tournament = this.tournaments.get(tournamentId);
                if (tournament && tournament.participants < tournament.maxParticipants) {
                    tournament.participants++;
                    this.tournaments.set(tournamentId, tournament);
                    return true;
                }
                return false;
            }

            // Transaction methods
            createTransaction(transactionData) {
                const id = Date.now().toString();
                const transaction = {
                    id,
                    ...transactionData,
                    timestamp: Date.now()
                };
                this.transactions.set(id, transaction);

                // Update user balance
                const user = this.users.get(transactionData.userId);
                if (user) {
                    if (transactionData.type === 'deposit') {
                        user.balance += transactionData.amount;
                    } else if (transactionData.type === 'withdrawal' || 
                              transactionData.type === 'game_entry' || 
                              transactionData.type === 'donation') {
                        user.balance -= transactionData.amount;
                    } else if (transactionData.type === 'game_win' || 
                              transactionData.type === 'tournament_win') {
                        user.balance += transactionData.amount;
                    }
                    this.users.set(user.id, user);
                }
                return transaction;
            }

            // Leaderboard methods
            getLeaderboard(gameType = null, limit = 10) {
                let users = Array.from(this.users.values());
                
                if (gameType === 'reaction') {
                    // Sort by reaction game stats
                    users = users.sort((a, b) => b.xp - a.xp);
                } else if (gameType === 'chess') {
                    users = users.sort((a, b) => b.xp - a.xp);
                } else {
                    users = users.sort((a, b) => b.xp - a.xp);
                }
                
                return users.slice(0, limit);
            }

            // Knowledge base methods
            searchKnowledgeBase(query) {
                const results = [];
                this.knowledgeBase.forEach((value, key) => {
                    if (value.topic.toLowerCase().includes(query.toLowerCase()) || 
                        value.content.toLowerCase().includes(query.toLowerCase())) {
                        results.push(value);
                    }
                });
                return results;
            }
        }

        class GameEngine {
            constructor() {
                this.activeGames = new Map();
                this.gameQueue = [];
                this.matchmakingTimeout = 30000;
                this.reactionGameActive = false;
                this.reactionStartTime = null;
            }

            createGame(player1, player2, entryFee = 10, gameType = 'reaction_duel') {
                const gameId = 'game_' + Date.now();
                const game = {
                    id: gameId,
                    player1: { id: player1.id, username: player1.username },
                    player2: { id: player2.id, username: player2.username },
                    entryFee,
                    gameType,
                    status: 'waiting',
                    score1: 0,
                    score2: 0,
                    moves: [],
                    startTime: null,
                    winner: null
                };
                this.activeGames.set(gameId, game);
                return game;
            }

            startGame(gameId) {
                const game = this.activeGames.get(gameId);
                if (game) {
                    game.status = 'active';
                    game.startTime = Date.now();
                }
                return game;
            }

            playRound(gameId, playerId) {
                const game = this.activeGames.get(gameId);
                if (!game || game.status !== 'active') return null;

                // Simulate game logic based on game type
                if (game.gameType === 'reaction_duel') {
                    const reactionTime = Math.floor(Math.random() * 300) + 150; // 150-450ms
                    const score = reactionTime < 200 ? 10 : 
                                 reactionTime < 300 ? 8 : 
                                 reactionTime < 400 ? 6 : 4;
                    
                    if (playerId === game.player1.id) {
                        game.score1 += score;
                    } else {
                        game.score2 += score;
                    }

                    game.moves.push({
                        player: playerId,
                        score,
                        reactionTime,
                        timestamp: Date.now()
                    });

                    // Check for game end (first to 50 points)
                    if (game.score1 >= 50 || game.score2 >= 50) {
                        game.status = 'finished';
                        game.winner = game.score1 >= 50 ? game.player1 : game.player2;
                    }
                }

                return game;
            }

            processGameEnd(game, db) {
                const winner = game.winner;
                const loser = winner.id === game.player1.id ? game.player2 : game.player1;
                
                // Calculate winnings (90% of pot)
                const prize = game.entryFee * 2 * 0.9;
                
                // Update balances
                db.createTransaction({
                    userId: winner.id,
                    amount: prize,
                    type: 'game_win',
                    description: `Won game against ${loser.username}`
                });

                // Award XP
                const winnerUser = db.getUser(winner.id);
                if (winnerUser) {
                    winnerUser.xp += 100;
                    winnerUser.wins = (winnerUser.wins || 0) + 1;
                    db.updateUser(winnerUser.id, winnerUser);
                }

                const loserUser = db.getUser(loser.id);
                if (loserUser) {
                    loserUser.losses = (loserUser.losses || 0) + 1;
                    db.updateUser(loserUser.id, loserUser);
                }

                return prize;
            }

            addToQueue(user) {
                if (!this.gameQueue.find(u => u.id === user.id)) {
                    this.gameQueue.push(user);
                    
                    // Check for match
                    if (this.gameQueue.length >= 2) {
                        const player1 = this.gameQueue.shift();
                        const player2 = this.gameQueue.shift();
                        return this.createGame(player1, player2, 10, 'reaction_duel');
                    }
                }
                return null;
            }

            removeFromQueue(userId) {
                this.gameQueue = this.gameQueue.filter(u => u.id !== userId);
            }
        }

        class WebSocketServer {
            constructor() {
                this.clients = new Map();
                this.rooms = new Map();
                this.messageHistory = [];
                this.chatMessages = [
                    { user: 'ProGamer', message: 'Anyone up for a game?', timestamp: Date.now() - 5000 },
                    { user: 'GameMaster', message: 'Just won 100 THB! üî•', timestamp: Date.now() - 30000 },
                    { user: 'System', message: 'NoobSlayer joined the arena', timestamp: Date.now() - 60000, system: true }
                ];
                this.init();
            }

            init() {
                // Simulate real-time updates
                setInterval(() => this.broadcastGameUpdates(), 5000);
                setInterval(() => this.updateViewerCounts(), 10000);
                setInterval(() => this.addRandomChat(), 30000);
            }

            addRandomChat() {
                const users = ['ProGamer', 'GameMaster', 'NoobSlayer', 'ChessKing', 'ReactionPro'];
                const messages = ['GG!', 'Anyone want to play?', 'Just hit level 20!', 'Tournament starting soon', 'Nice match!'];
                
                this.chatMessages.push({
                    user: users[Math.floor(Math.random() * users.length)],
                    message: messages[Math.floor(Math.random() * messages.length)],
                    timestamp: Date.now()
                });

                if (this.chatMessages.length > 50) {
                    this.chatMessages.shift();
                }
            }

            broadcastGameUpdates() {
                // Simulate game updates
                console.log('Broadcasting game updates...');
            }

            updateViewerCounts() {
                const counts = {
                    arena: Math.floor(Math.random() * 500) + 200,
                    tournaments: Math.floor(Math.random() * 300) + 100
                };
                this.broadcast(counts);
            }

            addChatMessage(user, message) {
                const chatMessage = {
                    user,
                    message,
                    timestamp: Date.now()
                };
                this.chatMessages.push(chatMessage);
                if (this.chatMessages.length > 50) {
                    this.chatMessages.shift();
                }
                return chatMessage;
            }

            getMessageHistory() {
                return this.chatMessages;
            }

            broadcast(message) {
                // Simulate broadcast to all clients
                if (window.app) {
                    app.handleWebSocketMessage(message);
                }
            }
        }

        class WikiAIEngine {
            constructor(db) {
                this.db = db;
                this.conversations = new Map();
            }

            async processQuery(userId, query) {
                const startTime = Date.now();
                
                // Sanitize query
                query = query.trim().toLowerCase();
                
                // Check knowledge base
                const knowledgeResults = this.db.searchKnowledgeBase(query);
                
                let answer = '';
                let sources = [];
                
                if (knowledgeResults.length > 0) {
                    answer = knowledgeResults[0].content;
                    sources = knowledgeResults.map(r => ({ source: 'Knowledge Base', topic: r.topic }));
                } else {
                    // Generate AI response based on keywords
                    if (query.includes('reaction duel') || query.includes('reaction')) {
                        answer = 'Reaction Duel is a fast-paced game testing your reflexes. Focus on the center of the screen and practice daily. Pro tip: Use a 144Hz+ monitor for competitive play.';
                    } else if (query.includes('chess') || query.includes('speed chess')) {
                        answer = 'Speed Chess requires quick thinking. Master common openings, use premoves, and practice endgames. Time management is crucial - spend more time on critical positions.';
                    } else if (query.includes('memory') || query.includes('memory match')) {
                        answer = 'Memory Match tests your cognitive abilities. Use the loci method, create stories for card pairs, and practice with memory training apps. Top players can track 12+ pairs simultaneously.';
                    } else if (query.includes('strategy') || query.includes('battle')) {
                        answer = 'Strategy Battle combines resource management and tactical combat. Balance economy with unit production, scout enemy positions, and time your attacks carefully.';
                    } else if (query.includes('tournament') || query.includes('tournaments')) {
                        answer = 'Tournaments require preparation. Practice consistently, study opponents, and manage your energy. Check-in at least 1 hour before start time.';
                    } else if (query.includes('tip') || query.includes('tips')) {
                        answer = 'General gaming tips: Practice regularly, take breaks, analyze your losses, and stay hydrated. Join communities to learn from others.';
                    } else {
                        answer = 'I found information about gaming strategies and tips. Could you be more specific about which game you\'re interested in?';
                    }
                    
                    sources = [{ source: 'AI Generated' }];
                }
                
                const processingTime = Date.now() - startTime;
                
                return {
                    query,
                    answer,
                    sources,
                    confidence: sources[0].source === 'Knowledge Base' ? 0.85 : 0.7,
                    processingTime
                };
            }

            createConversation(userId, title = null) {
                const id = Date.now().toString();
                const conversation = {
                    id,
                    userId,
                    title: title || `Conversation ${new Date().toLocaleString()}`,
                    messages: [
                        { role: 'assistant', content: 'Hello! I can answer questions about games, strategies, and more. Ask me anything!', timestamp: Date.now() }
                    ],
                    createdAt: Date.now()
                };
                this.conversations.set(id, conversation);
                return conversation;
            }

            addMessage(conversationId, role, content) {
                const conversation = this.conversations.get(conversationId);
                if (conversation) {
                    conversation.messages.push({
                        role,
                        content,
                        timestamp: Date.now()
                    });
                }
                return conversation;
            }
        }

        // ==================== MAIN APPLICATION ====================

        class ThumbsApp {
            constructor() {
                this.db = new Database();
                this.ws = new WebSocketServer();
                this.gameEngine = new GameEngine();
                this.wikiAI = new WikiAIEngine(this.db);
                this.currentUser = null;
                this.currentPage = 'home';
                this.darkMode = false;
                this.language = 'en';
                this.postOffset = 0;
                this.postsPerPage = 5;
                this.currentGameId = null;
                this.reactionTargetTimeout = null;
                this.memoryGameCards = [];
                this.memoryGameRevealed = [];
                this.memoryGameMatched = [];
                this.init();
            }

            init() {
                this.checkAuth();
                this.renderFeed();
                this.updateSidebars();
                this.setupEventListeners();
                this.startRealTimeUpdates();
                this.initMemoryGame();
                this.initStrategyBoard();
                
                // Set initial viewer count
                document.getElementById('viewerCount').textContent = '234';
                document.getElementById('prizeAmount').textContent = '20';
                document.getElementById('entryAmount').textContent = '10';
                document.getElementById('complianceProgress').style.width = '75%';
            }

            setupEventListeners() {
                window.addEventListener('click', (e) => {
                    if (!e.target.closest('.user-menu')) {
                        document.getElementById('userDropdown').classList.remove('show');
                    }
                });

                // Global search with debounce
                let searchTimeout;
                document.getElementById('globalSearch')?.addEventListener('input', (e) => {
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => this.search(e.target.value), 300);
                });
            }

            startRealTimeUpdates() {
                // Update viewer counts
                setInterval(() => {
                    const viewerCount = document.getElementById('viewerCount');
                    if (viewerCount) {
                        const newCount = Math.floor(Math.random() * 500) + 200;
                        viewerCount.textContent = newCount;
                    }
                }, 10000);

                // Update live streams
                setInterval(() => {
                    this.updateLiveStreams();
                }, 15000);

                // Update chat
                setInterval(() => {
                    this.updateChat();
                }, 5000);
            }

            handleWebSocketMessage(message) {
                if (message.type === 'viewer_update') {
                    document.getElementById('viewerCount').textContent = message.arena;
                }
            }

            // ==================== AUTHENTICATION ====================

            checkAuth() {
                const savedUser = localStorage.getItem('thumbsapp_user');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                    this.updateUIForAuth();
                } else {
                    // Auto-login as demo user for demonstration
                    setTimeout(() => {
                        this.currentUser = this.db.getUser('1');
                        this.updateUIForAuth();
                        this.renderFeed();
                        this.updateSidebars();
                    }, 500);
                }
            }

            showLogin() {
                document.getElementById('authTitle').textContent = 'Login';
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('registerForm').style.display = 'none';
                document.getElementById('authModal').classList.add('active');
            }

            showRegister() {
                document.getElementById('authTitle').textContent = 'Register';
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('registerForm').style.display = 'block';
                document.getElementById('authModal').classList.add('active');
            }

            login() {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                if (!email || !password) {
                    this.showToast('Please fill all fields', 'error');
                    return;
                }

                setTimeout(() => {
                    const user = this.db.getUserByEmail(email);
                    if (user && password === 'password') {
                        this.currentUser = user;
                        localStorage.setItem('thumbsapp_user', JSON.stringify(user));
                        this.updateUIForAuth();
                        this.closeModal('authModal');
                        this.showToast(`Welcome back, ${user.username}!`, 'success');
                        this.renderFeed();
                        this.updateSidebars();
                    } else {
                        this.showToast('Invalid email or password', 'error');
                    }
                }, 500);
            }

            register() {
                const username = document.getElementById('regUsername').value;
                const email = document.getElementById('regEmail').value;
                const password = document.getElementById('regPassword').value;
                const confirmPassword = document.getElementById('regConfirmPassword').value;
                const country = document.getElementById('regCountry').value;
                const dob = document.getElementById('regDob').value;

                if (!username || !email || !password || !confirmPassword || !dob) {
                    this.showToast('Please fill all fields', 'error');
                    return;
                }

                if (password !== confirmPassword) {
                    this.showToast('Passwords do not match', 'error');
                    return;
                }

                if (password.length < 6) {
                    this.showToast('Password must be at least 6 characters', 'error');
                    return;
                }

                // Check age (18+)
                const age = new Date().getFullYear() - new Date(dob).getFullYear();
                if (age < 18) {
                    this.showToast('You must be 18 or older to register', 'error');
                    return;
                }

                // Check if user exists
                if (this.db.getUserByEmail(email) || this.db.getUserByUsername(username)) {
                    this.showToast('User already exists', 'error');
                    return;
                }

                setTimeout(() => {
                    const newUser = this.db.createUser({
                        username,
                        email,
                        password: 'hashed_' + password,
                        country,
                        dob
                    });

                    this.currentUser = newUser;
                    localStorage.setItem('thumbsapp_user', JSON.stringify(newUser));
                    this.updateUIForAuth();
                    this.closeModal('authModal');
                    this.showToast('Account created successfully!', 'success');

                    // Award welcome bonus
                    this.db.createTransaction({
                        userId: newUser.id,
                        amount: 100,
                        type: 'welcome_bonus',
                        description: 'Welcome bonus'
                    });

                    this.updateSidebars();
                }, 500);
            }

            logout() {
                this.currentUser = null;
                localStorage.removeItem('thumbsapp_user');
                this.updateUIForAuth();
                this.showToast('Logged out successfully');
                this.showLogin();
            }

            updateUIForAuth() {
                const avatar = document.getElementById('userAvatar');
                const avatarInitial = document.getElementById('avatarInitial');
                const postAvatar = document.getElementById('postAvatar');
                const loginBtn = document.getElementById('loginBtn');
                const logoutBtn = document.getElementById('logoutBtn');
                const walletBalance = document.getElementById('walletBalance');

                if (this.currentUser) {
                    avatarInitial.textContent = this.currentUser.username[0].toUpperCase();
                    if (postAvatar) postAvatar.textContent = this.currentUser.username[0].toUpperCase();
                    loginBtn.style.display = 'none';
                    logoutBtn.style.display = 'flex';
                    walletBalance.textContent = `${this.currentUser.balance} THB`;
                    
                    // Update arena player names
                    document.getElementById('player1Name').textContent = this.currentUser.username;
                    document.getElementById('player1Avatar').textContent = this.currentUser.username[0].toUpperCase();
                    
                    // Find opponent
                    const opponent = Array.from(this.db.users.values()).find(u => u.id !== this.currentUser.id);
                    if (opponent) {
                        document.getElementById('player2Name').textContent = opponent.username;
                        document.getElementById('player2Avatar').textContent = opponent.username[0].toUpperCase();
                    }
                } else {
                    avatarInitial.textContent = 'G';
                    if (postAvatar) postAvatar.textContent = 'G';
                    loginBtn.style.display = 'flex';
                    logoutBtn.style.display = 'none';
                    walletBalance.textContent = '0 THB';
                }
            }

            // ==================== NAVIGATION ====================

            navigate(page) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById(page + '-page').classList.add('active');
                
                document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
                const activeNav = Array.from(document.querySelectorAll('.nav-item')).find(
                    item => item.textContent.toLowerCase().includes(page)
                );
                if (activeNav) activeNav.classList.add('active');
                
                this.currentPage = page;

                // Load page-specific data
                if (page === 'tournaments') {
                    this.renderTournaments();
                } else if (page === 'leaderboards') {
                    this.renderLeaderboards();
                } else if (page === 'arena') {
                    this.updateArena();
                }
            }

            // ==================== FEED ====================

            renderFeed() {
                const container = document.getElementById('feedContainer');
                if (!container) return;

                const posts = this.db.getPosts(this.postsPerPage, this.postOffset);
                
                if (posts.length === 0) {
                    container.innerHTML = '<div class="card" style="text-align: center; padding: 3rem;">No posts yet. Be the first to create a challenge!</div>';
                    return;
                }

                let html = '';
                posts.forEach(post => {
                    html += `
                        <div class="card" id="post-${post.id}">
                            <div class="post-header">
                                <div class="avatar small">${post.author[0]}</div>
                                <div class="post-info">
                                    <h4>${post.author}</h4>
                                    <span>${this.formatTime(post.timestamp)}</span>
                                </div>
                            </div>
                            <div class="post-content">
                                ${post.content}
                                <div class="game-tag">
                                    <i class="fas fa-gamepad"></i> ${post.game} ‚Ä¢ ${post.entryFee} THB ‚Ä¢ ${post.difficulty}
                                </div>
                            </div>
                            <div class="post-stats">
                                <span><i class="fas fa-thumbs-up"></i> <span id="likes-${post.id}">${post.likes}</span></span>
                                <span><i class="fas fa-comment"></i> ${post.comments}</span>
                                <span><i class="fas fa-share"></i> ${post.shares}</span>
                            </div>
                            <div class="post-actions">
                                <div class="post-action" onclick="app.likePost('${post.id}')"><i class="fas fa-thumbs-up"></i> Like</div>
                                <div class="post-action" onclick="app.commentPost('${post.id}')"><i class="fas fa-comment"></i> Comment</div>
                                <div class="post-action" onclick="app.sharePost('${post.id}')"><i class="fas fa-share"></i> Share</div>
                                <div class="post-action" onclick="app.joinChallenge('${post.id}')"><i class="fas fa-gamepad"></i> Join</div>
                            </div>
                        </div>
                    `;
                });

                container.innerHTML = html;
                
                const totalPosts = this.db.posts.size;
                document.getElementById('loadMoreBtn').style.display = 
                    this.postOffset + this.postsPerPage < totalPosts ? 'block' : 'none';
            }

            loadMore() {
                this.postOffset += this.postsPerPage;
                this.renderFeed();
            }

            createPost() {
                if (!this.currentUser) {
                    this.showToast('Please login to create a post', 'error');
                    this.showLogin();
                    return;
                }

                const title = document.getElementById('challengeTitle').value;
                const game = document.getElementById('challengeGame').value;
                const entryFee = parseInt(document.getElementById('challengeEntryFee').value);
                const difficulty = document.getElementById('challengeDifficulty').value;
                const description = document.getElementById('challengeDescription').value;

                if (!title || !game || !entryFee || !description) {
                    this.showToast('Please fill all fields', 'error');
                    return;
                }

                if (entryFee > this.currentUser.balance) {
                    this.showToast('Insufficient balance', 'error');
                    return;
                }

                // Create transaction for entry fee
                this.db.createTransaction({
                    userId: this.currentUser.id,
                    amount: entryFee,
                    type: 'game_entry',
                    description: `Created challenge: ${title}`
                });

                const post = this.db.createPost({
                    userId: this.currentUser.id,
                    author: this.currentUser.username,
                    content: `New challenge: ${title} - ${description}`,
                    game,
                    entryFee,
                    difficulty
                });

                this.postOffset = 0;
                this.renderFeed();
                this.closeModal('createModal');
                this.showToast('Challenge created! Escrow locked', 'success');

                // Clear form
                document.getElementById('challengeTitle').value = '';
                document.getElementById('challengeDescription').value = '';
            }

            likePost(postId) {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }

                const post = this.db.likePost(postId, this.currentUser.id);
                if (post) {
                    document.getElementById(`likes-${postId}`).textContent = post.likes;
                    this.showToast('Post liked!');
                }
            }

            commentPost(postId) {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }

                const comment = prompt('Enter your comment:');
                if (comment) {
                    this.showToast('Comment added!');
                }
            }

            sharePost(postId) {
                this.showToast('Post shared to your timeline!');
            }

            joinChallenge(postId) {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }

                const post = this.db.posts.get(postId);
                if (!post) return;

                if (post.entryFee > this.currentUser.balance) {
                    this.showToast('Insufficient balance to join', 'error');
                    return;
                }

                // Create transaction
                this.db.createTransaction({
                    userId: this.currentUser.id,
                    amount: post.entryFee,
                    type: 'game_entry',
                    description: `Joined challenge: ${post.content.substring(0, 50)}`
                });

                // Add to game queue
                const game = this.gameEngine.addToQueue(this.currentUser);
                if (game) {
                    this.showToast('Match found! Redirecting to arena...', 'success');
                    setTimeout(() => {
                        this.navigate('arena');
                        this.startGame(game.id);
                    }, 2000);
                } else {
                    this.showToast('Added to matchmaking queue...', 'info');
                }
            }

            // ==================== ARENA ====================

            updateArena() {
                if (!this.currentUser) {
                    this.showToast('Please login to access arena', 'error');
                    return;
                }

                document.getElementById('player1Name').textContent = this.currentUser.username;
                document.getElementById('player1Avatar').textContent = this.currentUser.username[0].toUpperCase();
            }

            startGame() {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }

                const opponent = Array.from(this.db.users.values()).find(u => u.id !== this.currentUser.id);
                if (!opponent) {
                    this.showToast('No opponents available', 'error');
                    return;
                }

                const game = this.gameEngine.createGame(this.currentUser, opponent, 10, 'reaction_duel');
                this.currentGameId = game.id;
                this.gameEngine.startGame(game.id);
                
                document.getElementById('startGameBtn').disabled = true;
                document.getElementById('playRoundBtn').disabled = false;
                
                // Show reaction game area
                document.getElementById('reactionGameArea').style.display = 'block';
                this.startReactionRound();
                
                this.showToast('Game started! Good luck!', 'success');
            }

            startReactionRound() {
                const target = document.getElementById('reactionTarget');
                const targetText = document.getElementById('targetText');
                
                target.classList.add('waiting');
                targetText.textContent = 'WAIT...';
                
                // Random delay before turning green (1-3 seconds)
                const delay = Math.random() * 2000 + 1000;
                
                this.reactionTargetTimeout = setTimeout(() => {
                    target.classList.remove('waiting');
                    target.classList.add('ready');
                    targetText.textContent = 'CLICK!';
                    this.reactionStartTime = Date.now();
                }, delay);
            }

            handleReaction() {
                if (!this.currentGameId) return;
                
                const target = document.getElementById('reactionTarget');
                
                if (target.classList.contains('ready')) {
                    // Valid reaction
                    const reactionTime = Date.now() - this.reactionStartTime;
                    this.playRound(reactionTime);
                    
                    // Reset for next round
                    target.classList.remove('ready');
                    this.startReactionRound();
                } else {
                    // Too early - penalty
                    this.showToast('Too early! -5 points', 'error');
                    this.playRound(1000); // Penalty
                    
                    // Reset
                    clearTimeout(this.reactionTargetTimeout);
                    target.classList.remove('waiting');
                    this.startReactionRound();
                }
            }

            playRound(reactionTime = null) {
                if (!this.currentUser || !this.currentGameId) return;

                const game = this.gameEngine.playRound(this.currentGameId, this.currentUser.id);
                if (game) {
                    document.getElementById('scoreA').textContent = game.score1;
                    document.getElementById('scoreB').textContent = game.score2;

                    if (reactionTime) {
                        this.showToast(`Reaction time: ${reactionTime}ms`, 'info');
                    }

                    if (game.status === 'finished') {
                        document.getElementById('playRoundBtn').disabled = true;
                        document.getElementById('startGameBtn').disabled = false;
                        document.getElementById('reactionGameArea').style.display = 'none';
                        
                        const winner = game.winner.id === this.currentUser.id;
                        const prize = this.gameEngine.processGameEnd(game, this.db);
                        
                        this.showToast(winner ? `You win! +${prize} THB` : 'You lose!', winner ? 'success' : 'error');
                        
                        // Update balance
                        this.currentUser = this.db.getUser(this.currentUser.id);
                        document.getElementById('walletBalance').textContent = `${this.currentUser.balance} THB`;
                    }
                }
            }

            watchGame() {
                this.showToast('Entering spectator mode...');
            }

            // ==================== MEMORY GAME ====================

            initMemoryGame() {
                const symbols = ['üê∂', 'üê±', 'üê≠', 'üêπ', 'üê∞', 'ü¶ä', 'üêª', 'üêº'];
                this.memoryGameCards = [...symbols, ...symbols];
                this.shuffleArray(this.memoryGameCards);
                this.memoryGameRevealed = [];
                this.memoryGameMatched = [];
                
                this.renderMemoryGame();
            }

            shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            renderMemoryGame() {
                const container = document.getElementById('memoryGame');
                if (!container) return;

                let html = '';
                for (let i = 0; i < this.memoryGameCards.length; i++) {
                    const isRevealed = this.memoryGameRevealed.includes(i);
                    const isMatched = this.memoryGameMatched.includes(i);
                    
                    html += `
                        <div class="memory-card ${isRevealed ? 'flipped' : ''} ${isMatched ? 'matched' : ''}" 
                             onclick="app.flipMemoryCard(${i})">
                            ${isRevealed || isMatched ? this.memoryGameCards[i] : '?'}
                        </div>
                    `;
                }
                container.innerHTML = html;
            }

            flipMemoryCard(index) {
                if (this.memoryGameMatched.includes(index) || 
                    this.memoryGameRevealed.includes(index) ||
                    this.memoryGameRevealed.length >= 2) {
                    return;
                }

                this.memoryGameRevealed.push(index);
                this.renderMemoryGame();

                if (this.memoryGameRevealed.length === 2) {
                    const [i, j] = this.memoryGameRevealed;
                    
                    if (this.memoryGameCards[i] === this.memoryGameCards[j]) {
                        // Match found
                        this.memoryGameMatched.push(i, j);
                        this.memoryGameRevealed = [];
                        
                        if (this.memoryGameMatched.length === this.memoryGameCards.length) {
                            this.showToast('Memory Game Complete! +50 XP', 'success');
                            
                            if (this.currentUser) {
                                this.currentUser.xp += 50;
                                this.db.updateUser(this.currentUser.id, this.currentUser);
                            }
                        }
                    } else {
                        // No match - hide after delay
                        setTimeout(() => {
                            this.memoryGameRevealed = [];
                            this.renderMemoryGame();
                        }, 1000);
                    }
                    
                    this.renderMemoryGame();
                }
            }

            startMemoryGame() {
                this.initMemoryGame();
                this.showToast('Memory game started!', 'success');
            }

            // ==================== STRATEGY BATTLE ====================

            initStrategyBoard() {
                const container = document.getElementById('strategyBoard');
                if (!container) return;

                let html = '';
                for (let i = 0; i < 8; i++) {
                    for (let j = 0; j < 8; j++) {
                        const cellClass = (i < 2) ? 'player1' : (i > 5) ? 'player2' : '';
                        html += `<div class="strategy-cell ${cellClass}" onclick="app.strategyCellClick(${i}, ${j})"></div>`;
                    }
                }
                container.innerHTML = html;
            }

            strategyCellClick(row, col) {
                this.showToast(`Selected position: ${row}, ${col}`, 'info');
            }

            // ==================== TOURNAMENTS ====================

            renderTournaments() {
                const container = document.getElementById('tournamentsList');
                const upcomingContainer = document.getElementById('upcomingTournaments');
                
                const tournaments = this.db.getActiveTournaments();
                const upcoming = this.db.getUpcomingTournaments();

                if (tournaments.length === 0) {
                    container.innerHTML = '<p style="text-align: center; padding: 2rem;">No active tournaments</p>';
                } else {
                    let html = '';
                    tournaments.forEach(tournament => {
                        html += `
                            <div class="leaderboard-item">
                                <div class="rank">üèÜ</div>
                                <div class="player-info">
                                    <div class="player-name">${tournament.name}</div>
                                    <div class="player-points">${tournament.game} ‚Ä¢ Entry: ${tournament.entryFee} THB ‚Ä¢ Prize: ${tournament.prize} THB ‚Ä¢ ${tournament.participants}/${tournament.maxParticipants} players</div>
                                </div>
                                <button class="btn" style="padding: 0.5rem 1rem;" onclick="app.joinTournament('${tournament.id}')" ${tournament.participants >= tournament.maxParticipants ? 'disabled' : ''}>
                                    ${tournament.participants >= tournament.maxParticipants ? 'Full' : 'Join'}
                                </button>
                            </div>
                        `;
                    });
                    container.innerHTML = html;
                }

                if (upcoming.length === 0) {
                    upcomingContainer.innerHTML = '<p>No upcoming tournaments</p>';
                } else {
                    let html = '';
                    upcoming.forEach(tournament => {
                        const timeUntil = Math.floor((tournament.startTime - Date.now()) / 3600000);
                        html += `
                            <div class="leaderboard-item">
                                <div class="player-info">
                                    <div class="player-name">${tournament.name}</div>
                                    <div class="player-points">Starts in ${timeUntil}h ‚Ä¢ ${tournament.participants}/${tournament.maxParticipants} registered</div>
                                </div>
                            </div>
                        `;
                    });
                    upcomingContainer.innerHTML = html;
                }

                // Update bracket
                this.renderTournamentBracket();
            }

            renderTournamentBracket() {
                const bracket = document.getElementById('tournamentBracket');
                if (!bracket) return;

                bracket.innerHTML = `
                    <div class="bracket-round">
                        <h4>Quarter Finals</h4>
                        <div class="bracket-match">QF1<br><small>ProGamer vs Player2</small></div>
                        <div class="bracket-match">QF2<br><small>GameMaster vs Player4</small></div>
                        <div class="bracket-match">QF3<br><small>Player5 vs Player6</small></div>
                        <div class="bracket-match">QF4<br><small>Player7 vs Player8</small></div>
                    </div>
                    <div class="bracket-round">
                        <h4>Semi Finals</h4>
                        <div class="bracket-match">SF1<br><small>Winner QF1 vs Winner QF2</small></div>
                        <div class="bracket-match">SF2<br><small>Winner QF3 vs Winner QF4</small></div>
                    </div>
                    <div class="bracket-round">
                        <h4>Final</h4>
                        <div class="bracket-match">Final<br><small>Winner SF1 vs Winner SF2</small></div>
                    </div>
                `;
            }

            createTournament() {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }
                
                if (this.currentUser.level < 5) {
                    this.showToast('Level 5 required to create tournaments', 'error');
                    return;
                }

                this.showToast('Tournament creation wizard - Coming soon!', 'info');
            }

            joinTournament(tournamentId) {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }

                const tournament = this.db.tournaments.get(tournamentId);
                if (!tournament) return;

                if (tournament.entryFee > this.currentUser.balance) {
                    this.showToast('Insufficient balance', 'error');
                    return;
                }

                if (this.db.joinTournament(tournamentId, this.currentUser.id)) {
                    this.db.createTransaction({
                        userId: this.currentUser.id,
                        amount: tournament.entryFee,
                        type: 'tournament_entry',
                        description: `Joined ${tournament.name}`
                    });

                    this.currentUser = this.db.getUser(this.currentUser.id);
                    document.getElementById('walletBalance').textContent = `${this.currentUser.balance} THB`;
                    this.showToast(`Joined ${tournament.name}!`, 'success');
                    this.renderTournaments();
                } else {
                    this.showToast('Tournament is full', 'error');
                }
            }

            // ==================== LEADERBOARDS ====================

            renderLeaderboards() {
                this.loadLeaderboard('global');
            }

            loadLeaderboard(gameType) {
                const container = document.getElementById('leaderboardsList');
                const users = this.db.getLeaderboard(gameType, 10);

                let html = '';
                users.forEach((user, index) => {
                    const rankIcon = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}`;
                    const rankClass = index === 0 ? 'gold' : index === 1 ? 'silver' : index === 2 ? 'bronze' : '';
                    
                    html += `
                        <div class="leaderboard-item">
                            <div class="rank ${rankClass}">${rankIcon}</div>
                            <div class="avatar small">${user.username[0]}</div>
                            <div class="player-info">
                                <div class="player-name">${user.username}</div>
                                <div class="player-points">Level ${user.level} ‚Ä¢ ${user.xp} XP ‚Ä¢ W:${user.wins} L:${user.losses}</div>
                            </div>
                            <div>${user.balance} THB</div>
                        </div>
                    `;
                });

                container.innerHTML = html;
            }

            // ==================== WIKI AI ====================

            askWiki() {
                const input = document.getElementById('wikiInput');
                const query = input.value.trim();
                
                if (!query) return;
                
                const messagesContainer = document.getElementById('wikiMessages');
                
                // Add user message
                messagesContainer.innerHTML += `
                    <div class="chat-message">
                        <strong>You:</strong> ${query}
                    </div>
                `;
                
                input.value = '';
                
                // Show typing indicator
                messagesContainer.innerHTML += `
                    <div class="chat-message system" id="wikiTyping">
                        <strong>AI:</strong> <i>typing...</i>
                    </div>
                `;
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                // Process query
                setTimeout(() => {
                    document.getElementById('wikiTyping')?.remove();
                    
                    const response = this.wikiAI.processQuery(this.currentUser?.id, query);
                    
                    messagesContainer.innerHTML += `
                        <div class="chat-message system">
                            <strong>AI:</strong> ${response.answer}
                            <div style="font-size: 0.7rem; margin-top: 0.3rem; color: var(--text-secondary);">
                                Sources: ${response.sources.map(s => s.source).join(', ')} ‚Ä¢ ${response.processingTime}ms
                            </div>
                        </div>
                    `;
                    
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 1000);
            }

            handleWikiKeypress(e) {
                if (e.key === 'Enter') {
                    this.askWiki();
                }
            }

            // ==================== SIDEBARS ====================

            updateSidebars() {
                this.updateLiveStreams();
                this.updateLeaderboardSidebar();
                this.updateChat();
                this.updateAchievements();
                this.updateBadges();
            }

            updateLiveStreams() {
                const container = document.getElementById('liveStreams');
                const liveCount = document.getElementById('liveCount');

                const streams = [
                    { name: 'Speed Chess', viewers: 45 },
                    { name: 'Reaction Duel', viewers: 32 },
                    { name: 'Strategy Battle', viewers: 28 }
                ];

                liveCount.textContent = streams.length;

                let html = '';
                streams.forEach(stream => {
                    html += `
                        <div class="sidebar-item" onclick="app.navigate('arena')">
                            <span class="live-badge">LIVE</span> ${stream.name}
                            <span style="margin-left: auto;">${stream.viewers}</span>
                        </div>
                    `;
                });

                container.innerHTML = html;
            }

            updateLeaderboardSidebar() {
                const container = document.getElementById('sidebarLeaderboard');
                const users = this.db.getLeaderboard(null, 5);

                let html = '';
                users.forEach((user, index) => {
                    html += `
                        <div class="leaderboard-item">
                            <span class="rank">${index + 1}</span>
                            <span>${user.username}</span>
                            <span style="margin-left: auto;">${user.xp} XP</span>
                        </div>
                    `;
                });

                container.innerHTML = html;
            }

            updateChat() {
                const container = document.getElementById('chatMessages');
                const messages = this.ws.getMessageHistory().slice(-10);

                let html = '';
                messages.forEach(msg => {
                    if (msg.system) {
                        html += `<div class="chat-message system"><strong>System:</strong> ${msg.message}</div>`;
                    } else {
                        html += `<div class="chat-message"><strong>${msg.user}:</strong> ${msg.message}</div>`;
                    }
                });

                container.innerHTML = html;
                container.scrollTop = container.scrollHeight;
            }

            updateAchievements() {
                const container = document.getElementById('achievementsList');
                const achievements = Array.from(this.db.achievements.values()).slice(0, 3);

                let html = '';
                achievements.forEach(achievement => {
                    const unlocked = this.currentUser?.achievements.includes(achievement.id);
                    html += `
                        <div class="badge-item ${unlocked ? 'unlocked' : ''}">
                            <div class="badge-icon">${achievement.icon}</div>
                            <div class="badge-name">${achievement.name}</div>
                        </div>
                    `;
                });

                container.innerHTML = html;
            }

            updateBadges() {
                if (this.currentUser) {
                    document.getElementById('friendsBadge').textContent = this.currentUser.friends?.length || 0;
                    document.getElementById('messagesBadge').textContent = Math.floor(Math.random() * 5);
                }
            }

            // ==================== CHAT ====================

            sendChat() {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();

                if (!message) return;

                if (!this.currentUser) {
                    this.showToast('Please login to chat', 'error');
                    this.showLogin();
                    return;
                }

                const chatMessage = this.ws.addChatMessage(this.currentUser.username, message);
                input.value = '';
                
                this.updateChat();
            }

            handleChatKeypress(e) {
                if (e.key === 'Enter') {
                    this.sendChat();
                }
            }

            // ==================== WALLET ====================

            showDeposit() {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }
                document.getElementById('depositModal').classList.add('active');
            }

            processDeposit() {
                const amount = parseInt(document.getElementById('depositAmount').value);
                const method = document.getElementById('paymentMethod').value;

                if (!amount || amount < 100) {
                    this.showToast('Minimum deposit is 100 THB', 'error');
                    return;
                }

                this.db.createTransaction({
                    userId: this.currentUser.id,
                    amount,
                    type: 'deposit',
                    description: `Deposit via ${method}`
                });

                this.currentUser = this.db.getUser(this.currentUser.id);
                document.getElementById('walletBalance').textContent = `${this.currentUser.balance} THB`;

                this.closeModal('depositModal');
                this.showToast(`Deposited ${amount} THB successfully!`, 'success');
            }

            // ==================== SEARCH ====================

            search(query) {
                if (!query || query.length < 2) return;

                const results = [];

                // Search users
                this.db.users.forEach(user => {
                    if (user.username.toLowerCase().includes(query.toLowerCase())) {
                        results.push({ type: 'user', name: user.username });
                    }
                });

                // Search games
                ['Reaction Duel', 'Speed Chess', 'Memory Match', 'Strategy Battle'].forEach(game => {
                    if (game.toLowerCase().includes(query.toLowerCase())) {
                        results.push({ type: 'game', name: game });
                    }
                });

                if (results.length > 0) {
                    this.showToast(`Found ${results.length} results`, 'info');
                }
            }

            // ==================== UTILITIES ====================

            formatTime(timestamp) {
                const seconds = Math.floor((Date.now() - timestamp) / 1000);
                
                if (seconds < 60) return 'just now';
                if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
                if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
                return `${Math.floor(seconds / 86400)}d ago`;
            }

            showToast(message, type = 'info') {
                const container = document.getElementById('toastContainer');
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                const icons = {
                    success: 'fa-check-circle',
                    error: 'fa-exclamation-circle',
                    info: 'fa-info-circle'
                };
                
                const colors = {
                    success: 'var(--success)',
                    error: 'var(--danger)',
                    info: 'var(--accent)'
                };
                
                toast.innerHTML = `
                    <i class="fas ${icons[type]}" style="color: ${colors[type]};"></i>
                    <span>${message}</span>
                `;
                
                container.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.animation = 'slideIn 0.3s ease reverse';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }

            toggleUserMenu() {
                document.getElementById('userDropdown').classList.toggle('show');
            }

            closeModal(id) {
                document.getElementById(id).classList.remove('active');
            }

            openCreateModal() {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }
                document.getElementById('createModal').classList.add('active');
            }

            // ==================== THEME ====================

            setTheme(color) {
                const root = document.documentElement;
                const themes = {
                    blue: '#6366f1',
                    pink: '#ec4899',
                    green: '#10b981',
                    purple: '#8b5cf6',
                    orange: '#f97316'
                };
                
                root.style.setProperty('--accent', themes[color]);
                root.style.setProperty('--accent-dark', this.adjustColor(themes[color], -20));
                root.style.setProperty('--accent-glow', this.adjustColor(themes[color], 20));
                
                this.showToast(`Theme updated to ${color}`);
            }

            adjustColor(hex, percent) {
                return hex;
            }

            toggleDarkMode() {
                document.body.classList.toggle('dark');
                this.darkMode = !this.darkMode;
                this.showToast(this.darkMode ? 'Dark mode enabled' : 'Light mode enabled');
            }

            showLanguageSelector() {
                const languages = ['English', 'Spanish', 'French', 'German', 'Japanese'];
                const current = document.getElementById('currentLanguage').textContent;
                const newLang = prompt(`Select language (${languages.join(', ')})`, current);
                if (newLang && languages.includes(newLang)) {
                    document.getElementById('currentLanguage').textContent = newLang;
                    this.showToast(`Language changed to ${newLang}`);
                }
            }

            // ==================== USER MENU ACTIONS ====================

            showNotifications() {
                this.showToast('You have 3 new notifications');
            }

            showMessages() {
                this.showToast('Opening messages');
            }

            showProfile() {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }
                this.showToast(`Profile: ${this.currentUser.username} ‚Ä¢ Level ${this.currentUser.level}`);
                document.getElementById('userDropdown').classList.remove('show');
            }

            showWallet() {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }
                this.showToast(`Balance: ${this.currentUser.balance} THB`);
                document.getElementById('userDropdown').classList.remove('show');
            }

            showSettings() {
                this.showToast('Settings panel');
            }

            showAchievements() {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }
                
                const achievements = this.currentUser.achievements || [];
                if (achievements.length > 0) {
                    this.showToast(`Achievements: ${achievements.length} unlocked`, 'success');
                } else {
                    this.showToast('No achievements yet', 'info');
                }
            }

            showFriends() {
                this.showToast('Your friends list');
            }

            showGroups() {
                this.showToast('Your groups');
            }

            showEvents() {
                this.showToast('Upcoming events');
            }

            showChallenges() {
                this.showToast('Active challenges');
            }

            showBusiness() {
                this.showToast('Creator Studio - Coming soon!');
            }

            showAds() {
                this.showToast('Ad Manager - Coming soon!');
            }

            showAnalytics() {
                this.showToast('Analytics dashboard');
            }

            openAd() {
                window.open('https://example.com', '_blank');
            }

            // ==================== DONATIONS ====================

            showDonation() {
                if (!this.currentUser) {
                    this.showLogin();
                    return;
                }
                document.getElementById('donationModal').classList.add('active');
            }

            donate() {
                const amount = parseInt(document.getElementById('donateAmount').value);
                const message = document.getElementById('donateMessage').value;

                if (!amount || amount < 10) {
                    this.showToast('Minimum donation is 10 THB', 'error');
                    return;
                }

                if (amount > this.currentUser.balance) {
                    this.showToast('Insufficient balance', 'error');
                    return;
                }

                this.db.createTransaction({
                    userId: this.currentUser.id,
                    amount,
                    type: 'donation',
                    description: message || 'Donation'
                });

                this.currentUser = this.db.getUser(this.currentUser.id);
                document.getElementById('walletBalance').textContent = `${this.currentUser.balance} THB`;

                this.closeModal('donationModal');
                this.showToast(`Donated ${amount} THB! Thank you`, 'success');
            }

            // ==================== FOOTER ACTIONS ====================

            showSponsor() {
                this.showToast('Sponsorship options');
            }

            showHelp() {
                this.showToast('Help center');
            }

            showTerms() {
                this.showToast('Terms of service');
            }

            showPrivacy() {
                this.showToast('Privacy policy');
            }

            showAbout() {
                this.showToast('About THUMBS ARENA');
            }

            showAgeVerification() {
                this.showToast('Age verification required: 18+');
            }

            showCompliance() {
                this.showToast('Geo-compliance active');
            }

            showResponsible() {
                this.showToast('Responsible gaming tools');
            }

            showForgotPassword() {
                const email = prompt('Enter your email to reset password');
                if (email) {
                    setTimeout(() => {
                        this.showToast('Password reset link sent!', 'success');
                    }, 1000);
                }
            }
        }

        // Initialize the application
        const app = new ThumbsApp();
        window.app = app;
    </script>
</body>
</html>
